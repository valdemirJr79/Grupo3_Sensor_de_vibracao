Pular para o conte√∫do
Hist√≥rico de chats

Fa√ßa upgrade do seu plano
Voc√™ disse:
Massa! Voc√™ quer montar um prot√≥tipo com o **ESP32** para medir **corrente el√©trica** usando o **SCT-013 (100A:50mA)** e tamb√©m medir **vibra√ß√£o** usando o **ADXL345** (aceler√¥metro). Show, vamos organizar o projeto!

---

## üîé Objetivos do prot√≥tipo:

* Medir corrente AC da rede el√©trica com o SCT-013
* Medir vibra√ß√£o (acelera√ß√£o) com ADXL345
* Processar e enviar dados com o ESP32 (via Serial, Wi-Fi, MQTT, etc)

---

# 1Ô∏è‚É£ Sensor de corrente SCT-013 (100A:50mA)

### Resumo:

* SCT-013 sa√≠da em corrente (50mA no m√°ximo)
* Precisa de resistor de carga (burden resistor) para converter corrente em tens√£o
* Usar divisor de tens√£o e ponto m√©dio (bias) para leitura segura no ESP32 (ADC 0-3.3V)

### Circuito para SCT-013

* Resistor burden: ~62Œ© (calibrar)
* Divisor com 2 resistores de 10k para criar bias em 1.65V
* Conectar √† entrada anal√≥gica do ESP32 (GPIO34 ou similar)

---

# 2Ô∏è‚É£ Sensor de vibra√ß√£o ADXL345

### Resumo:

* Aceler√¥metro 3 eixos
* Comunica√ß√£o I2C (pinos SDA e SCL do ESP32)
* Alimenta√ß√£o 3.3V (compat√≠vel com ESP32)
* Biblioteca Arduino pronta (ex: Adafruit_ADXL345)

### Conex√£o t√≠pica:

| ADXL345 Pin | ESP32 Pin |
| ----------- | --------- |
| VCC         | 3.3V      |
| GND         | GND       |
| SDA         | GPIO21    |
| SCL         | GPIO22    |

---

# 3Ô∏è‚É£ C√≥digo b√°sico (integra√ß√£o)

Vou te dar um c√≥digo exemplo que l√™ corrente e acelera√ß√£o.

cpp
#include <Wire.h>
#include <Adafruit_Sensor.h>
#include <Adafruit_ADXL345_U.h>

// Pino do sensor de corrente
const int currentSensorPin = 34;
const int nSamples = 500;
const float Vref = 1.65;   // Tens√£o de bias (metade de 3.3V)
const float burdenResistor = 62.0; // Ohms
const float calibration = 60.6;    // Ajustar conforme seu resistor e sensor

Adafruit_ADXL345_Unified accel = Adafruit_ADXL345_Unified(12345);

void setup() {
  Serial.begin(115200);
  Wire.begin();

  // Inicializa ADXL345
  if (!accel.begin()) {
    Serial.println("Erro ao iniciar ADXL345");
    while (1);
  }

  accel.setRange(ADXL345_RANGE_16_G);
  Serial.println("Sensor ADXL345 iniciado");
}

void loop() {
  // Leitura corrente AC (RMS)
  float sum = 0;
  for (int i = 0; i < nSamples; i++) {
    int raw = analogRead(currentSensorPin);
    float voltage = (raw / 4095.0) * 3.3;
    float centered = voltage - Vref;
    sum += centered * centered;
  }
  float voltageRMS = sqrt(sum / nSamples);
  float current = voltageRMS * calibration;

  Serial.print("Corrente RMS: ");
  Serial.print(current);
  Serial.println(" A");

  // Leitura do aceler√¥metro
  sensors_event_t event; 
  accel.getEvent(&event);

  Serial.print("Accel X: "); Serial.print(event.acceleration.x); Serial.print(" m/s^2, ");
  Serial.print("Y: "); Serial.print(event.acceleration.y); Serial.print(" m/s^2, ");
  Serial.print("Z: "); Serial.print(event.acceleration.z); Serial.println(" m/s^2");

  delay(1000);
}


---

# 4Ô∏è‚É£ Dicas para montagem f√≠sica

* Sensor SCT-013: coloque o **burden resistor e divisor de tens√£o** na protoboard.
* Sensor ADXL345: conecte no barramento I2C do ESP32.
* Garanta que o sensor SCT-013 esteja abra√ßando **apenas um condutor** da rede (fase ou neutro).
* Use cabos blindados ou com ferrite para reduzir ru√≠do.

---

# 5Ô∏è‚É£ Pr√≥ximos passos legais

* Filtrar os dados do sensor de corrente para remover ru√≠dos (filtro passa-baixa)
* Calibrar o sensor SCT-013 com um mult√≠metro para melhorar a precis√£o
* Salvar dados em cart√£o SD ou enviar via Wi-Fi para dashboard
* Processar a vibra√ß√£o para detectar eventos espec√≠ficos (picos, frequ√™ncia, etc)

---

Se quiser, posso ajudar com:

* Esquemas el√©tricos detalhados (com imagens)
* Explica√ß√£o de como fazer a calibra√ß√£o exata do SCT-013
* C√≥digo para enviar dados via Wi-Fi (MQTT, HTTP)
* Processamento de sinais de vibra√ß√£o

Quer seguir com algum desses?
O ChatGPT disse:
Boa! üöÄ Voc√™ j√° montou um √≥timo esqueleto do projeto ‚Äî tanto na parte de hardware quanto no c√≥digo.

D√° pra ir afinando em alguns pontos:

‚úÖ Revis√£o r√°pida do que voc√™ montou:
SCT-013
Burden resistor ~62 Œ© ‚Üí correto (para 50 mA ‚Üí 3,1 V pico, ainda dentro da faixa do ESP32).

Bias com divisor de 10k/10k ‚Üí correto, centraliza em ~1,65 V.

Leitura RMS ‚Üí seu c√≥digo j√° implementa, s√≥ precisa calibrar com carga conhecida.

ADXL345
Alimenta√ß√£o e conex√µes I2C ‚Üí certinho.

Uso da lib Adafruit ‚Üí facilita demais.

Range em ¬±16 g ‚Üí bom pra vibra√ß√£o forte, mas se quiser mais resolu√ß√£o pode usar ¬±2 g.

ESP32
ADC de 12 bits ‚Üí 0‚Äì4095, leitura com analogRead() est√° correta.

Serial debug ‚Üí perfeito para validar no in√≠cio.

üîß Ajustes que podem melhorar
Calibra√ß√£o do SCT-013
O fator calibration = 60.6 vai variar conforme seu resistor real (valor exato medido com mult√≠metro) e a rede (127/220 V).
üëâ O ideal √© ligar uma carga conhecida (ex: l√¢mpada de 100 W = ~0,45 A em 220 V) e ajustar o fator at√© bater com o mult√≠metro.

Ru√≠do no ADC do ESP32
O ESP32 √†s vezes ‚Äútreme‚Äù leituras no ADC. Sugest√µes:

Sempre usar o mesmo canal ADC1 (GPIO 32‚Äì39, j√° fez isso).

Se poss√≠vel, usar m√©dia de v√°rias janelas (ex: m√©dia de 10 RMS consecutivos).

Colocar um capacitor de 100 nF no bias (entre 1,65 V e GND) ajuda a estabilizar.

Filtro digital
Pra corrente, voc√™ pode aplicar um filtro passa-baixa simples ou usar a biblioteca EmonLib (j√° pronta pra SCT-013).

Vibra√ß√£o (ADXL345)

Pra detec√ß√£o de eventos, pode calcular a magnitude do vetor:

float mag = sqrt(event.acceleration.x*event.acceleration.x + 
                 event.acceleration.y*event.acceleration.y + 
                 event.acceleration.z*event.acceleration.z);
Assim voc√™ mede vibra√ß√£o ‚Äúgeral‚Äù sem depender de eixo.

üöÄ Pr√≥ximos passos legais
üìä Dashboard em tempo real ‚Üí enviar via MQTT para Node-RED + Grafana.

üíæ Log local ‚Üí salvar em cart√£o SD ou SPIFFS.

üîç An√°lise de vibra√ß√£o ‚Üí FFT (Fast Fourier Transform) no ESP32 ou enviar dados crus pro PC e analisar no Python.

‚ö° Seguran√ßa ‚Üí nunca abrir o SCT-013 e sempre medir apenas um condutor.

üëâ Quer que eu desenhe o esquema el√©trico com os resistores e conex√µes (SCT-013 + ADXL345 + ESP32) pra voc√™ montar na protoboard?




Nenhum arquivo escolhidoNenhum arquivo escolhido
O ChatGPT pode cometer erros. Por isso, lembre-se de conferir informa√ß√µes relevantes.

